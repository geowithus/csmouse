/**
 * 
 * @Class			CSMOUSE / csmouse-class.min.js, Pure JavaScript
 * @Idea			Darko B.
 * @Authors			Darko B. && Kresimir K.
 * @Copyright		Copyright (c) GEO With Us Corp. USA, New York, NY
 * @Version			1.2 Apr-2014
 * @License			Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)
 * @ComercialUse	Feel free to study and adapt for personal use, but for commercial or any enterprise use, please contact us @ copyright@geowith.us
 * @URL				https://geowith.us/csmouse/
 * 
 */
function CSMOUSE(t,s){return this.selector=t,this.settings={first:void 0!==s.first?s.first:"first_"+this.selector,last:void 0!==s.last?s.last:"last_"+this.selector,values:void 0!==s.values?s.values:"values_"+this.selector,items:void 0!==s.items?s.items:"items_"+this.selector,color:void 0!==s.color?s.color:"csmouse_color",all:void 0!==s.all?s.all:"sel_all_"+this.selector,none:void 0!==s.none?s.none:"unsel_all_"+this.selector,togg:void 0!==s.togg?s.togg:"toggle_"+this.selector,cnt:void 0!==s.cnt?s.cnt:"csmouse_cnt_elem_"+this.selector,elems:void 0!==s.elems?s.elems:"csmouse_elems_"+this.selector,json:void 0!==s.json?s.json:"csmouse_json_elem_"+this.selector,serial:void 0!==s.serial?s.serial:"csmouse_serial_elem_"+this.selector,output:void 0!==s.output?s.output:"id",debug:void 0!==s.debug&&s.debug},this.itemsDOM={},this.RESOLVENoneOfTheKeys=function(t,s,e,i,h,n,l){try{this.sv(e,s),this.sv(i,s),this.sv(h,s+","),this.markSelected(t,h,n,l)}catch(t){this.cl(t)}},this.RESOLVECtrlAndShiftKeys=function(t,s,e,i,h,n,l){try{""!==this.gv(e)&&(this.sv(e,this.gv(i)),this.sv(i,s),this.selectCtrlShift(t,s,e,i,h,n,l))}catch(t){this.cl(t)}},this.RESOLVECtrlKey=function(t,s,e,i,h,n,l){try{this.inArray(s,this.gv(h))?(1===this.numberSelected(h)?(this.sv(e,""),this.sv(i,""),this.sv(h,"")):this.sv(i,s),this.removeAlreadySelected(s,h)):""===this.gv(e)?(this.sv(e,s),this.sv(i,s),this.sv(h,s+",")):(this.sv(i,s),this.sv(h,this.gv(h)+s+",")),this.markSelected(t,h,n,l)}catch(t){this.cl(t)}},this.RESOLVEShiftKey=function(t,s,e,i,h,n,l){try{""===this.gv(e)?(this.sv(e,"0"),this.sv(i,s),this.sv(h,s+",")):this.sv(i,s),this.selectShift(t,s,e,i,h,n,l)}catch(t){this.cl(t)}},this.selectCtrlShift=function(t,s,e,i,h,n,l){try{var c="",r=parseInt(this.gv(e)),o=parseInt(this.gv(i));if(r<=o)for(var g=r;g<=o;g++)c+=g+",";else for(g=o;g<=r;g++)c+=g+",";var u="",a=c.split(",");if(this.inArray(this.gv(e),this.gv(h)))for(g=0;g<a.length-1;g++)u+=a[g]+"-a,";else for(g=0;g<a.length-1;g++)u+=a[g]+"-r,";for(var d,v,m=this.gv(h),f=u.split(","),g=0;g<f.length-1;g++){var p=f[g].split("-");if(p[0]!==this.gv(e)&&p[0]!==s){if("a"===p[1])m+=p[0]+",";else{for(var y="",S=this.gv(h).split(","),E=0;E<S.length-1;E++)S[E]!==p[0]&&(y+=S[E]+",");m=y}this.sv(h,m)}}parseInt(this.gv(e))>parseInt(this.gv(i))&&(d=this.gv(e),v=this.gv(i),this.sv(e,v),this.sv(i,d)),this.markSelected(t,h,n,l)}catch(t){this.cl(t)}},this.selectShift=function(t,s,e,i,h,n,l){try{this.removeAlreadySelected(s,h);var c="",r="",r=parseInt(this.gv(e))<=parseInt(this.gv(i))?(c=parseInt(this.gv(e)),parseInt(this.gv(i))):(c=parseInt(this.gv(i)),parseInt(this.gv(e))),o="",g=this.gv(n).split(",");this.removeClass(t,l);for(var u=c;u<=r;u++)o+=u+",",this.ac(g[u],l);this.sv(h,o)}catch(t){this.cl(t)}},this.markSelected=function(t,s,e,i){try{this.removeClass(t,i);for(var h=this.gv(e),n=this.gv(s),l=h.split(","),c=n.split(","),r=0;r<c.length-1;r++)this.ac(l[c[r]],i)}catch(t){this.cl(t)}},this.removeAlreadySelected=function(s,t){try{var e,i=this.gv(t);""!==i&&(e=i.split(",").filter(function(t){return parseInt(t)!==s}));for(var h="",n=0;n<e.length-1;n++)h+=e[n]+",";""!==h&&this.sv(t,h)}catch(t){this.cl(t)}},this.numberSelected=function(t){try{return this.gv(t).split(",").length-1}catch(t){this.cl(t)}},this.toggleSelection=function(t,e,s,i,h,n){try{var l,c,r,o;""!==this.gv(i)&&(l="",(c=document.querySelectorAll("."+t)).forEach(function(t,s){this.inArray(s,this.gv(i))||(l+=s+",",0===s&&this.sv(e,s))},this),this.sv(i,l),r=l.slice(-2).split(","),this.sv(s,r[0]),this.removeClass(t,n),o=this.gv(h).split(","),c.forEach(function(t,s){this.inArray(s,l)&&this.ac(o[s],n)},this))}catch(t){this.cl(t)}},this.selectAll=function(t,s,e,i,h,n){try{var l=this.gv(h).split(","),c="";document.querySelectorAll("."+t).forEach(function(t,s){c+=s+",",this.ac(l[s],n)},this);var r=parseInt(l.length)-1;this.sv(s,"0"),this.sv(e,r),this.sv(i,c)}catch(t){this.cl(t)}},this.unselectAll=function(t,s,e,i,h){try{this.sv(s,""),this.sv(e,""),this.sv(i,""),this.removeClass(t,h)}catch(t){this.cl(t)}},this.showSelectedJSON=function(t,s,e){try{for(var i=!1,h=this.gv(s).split(","),n=this.gv(t).split(","),l=[],c=0;c<n.length-1;c++)i=!0,"id"===e?l.push(h[n[c]]):l.push(encodeURI(this.ga(h[n[c]],e)));i?alert(JSON.stringify(l)):alert("Nothing is selected from the list")}catch(t){this.cl(t)}},this.showSelectedSerialize=function(t,s,e,i){try{for(var h=!1,n=t+"=on&",l=this.gv(e).split(","),c=this.gv(s).split(","),r=[],o=0;o<c.length-1;o++)h=!0,"id"===i?r.push(l[c[o]]):r.push(encodeURI(this.ga(l[c[o]],i)));n+=r.join("=on&"),n+="=on",h?alert(n):alert("Nothing is selected from the list")}catch(t){this.cl(t)}},this.getSelectedJSONOutput=function(t,s,e){try{for(var i=!1,h=this.gv(s).split(","),n=this.gv(t).split(","),l=[],c=0;c<n.length-1;c++)i=!0,"id"===e?l.push(h[n[c]]):l.push(encodeURI(this.ga(h[n[c]],e)));return i?JSON.stringify(l):""}catch(t){this.cl(t)}},this.getSelectedSerializeOutput=function(t,s,e,i){try{for(var h=!1,n=t+"=on&",l=this.gv(e).split(","),c=this.gv(s).split(","),r=[],o=0;o<c.length-1;o++)h=!0,"id"===i?r.push(l[c[o]]):r.push(encodeURI(this.ga(l[c[o]],i)));return n+=r.join("=on&"),n+="=on",h?n:""}catch(t){this.cl(t)}},this.removeClass=function(t,s){try{var e=document.querySelectorAll("."+t);[].forEach.call(e,function(t){t.classList.remove(s)})}catch(t){this.cl(t)}},this.inArray=function(t,s){try{for(var e=!1,i=s.split(","),h=0;h<i.length-1;h++)parseInt(i[h])===parseInt(t)&&(e=!0);return e}catch(t){this.cl(t)}},this.gv=function(t){try{return document.getElementById(t).value}catch(t){this.cl(t)}},this.ga=function(t,s){try{return document.getElementById(t).getAttribute(s)}catch(t){this.cl(t)}},this.sv=function(t,s){try{return document.getElementById(t).value=s,!0}catch(t){this.cl(t)}},this.ac=function(t,s){try{return document.getElementById(t).classList.add(s),!0}catch(t){this.cl(t)}},this.defineClick=function(){for(var t=0;t<this.itemsDOM.length;t++)this.itemsDOM[t].addEventListener("click",this.checkClick.bind(this))},this.setUpItemsAndTheirInput=function(){for(var t="",s=0;s<this.itemsDOM.length;s++)t+=this.itemsDOM[s].id+",";this.sv(this.settings.items,t)},this.checkClick=function(t){try{var s=Array.from(this.itemsDOM).indexOf(t.target),e=!1;t.ctrlKey||t.shiftKey||t.metaKey||this.RESOLVENoneOfTheKeys(this.selector,s,this.settings.first,this.settings.last,this.settings.values,this.settings.items,this.settings.color),(t.ctrlKey&&t.shiftKey||t.metaKey&&t.shiftKey)&&(this.RESOLVECtrlAndShiftKeys(this.selector,s,this.settings.first,this.settings.last,this.settings.values,this.settings.items,this.settings.color),e=!0),e||((t.ctrlKey||t.metaKey)&&this.RESOLVECtrlKey(this.selector,s,this.settings.first,this.settings.last,this.settings.values,this.settings.items,this.settings.color),t.shiftKey&&this.RESOLVEShiftKey(this.selector,s,this.settings.first,this.settings.last,this.settings.values,this.settings.items,this.settings.color)),this.setUpCounter()}catch(t){this.cl(t)}},this.setUpCounter=function(){void 0!==document.getElementById(this.settings.togg)&&(document.getElementById(this.settings.cnt).innerHTML=this.numberSelected(this.settings.values))},this.toggleElements=function(){this.toggleSelection(this.selector,this.settings.first,this.settings.last,this.settings.values,this.settings.items,this.settings.color),this.setUpCounter()},this.selectAllElements=function(){this.selectAll(this.selector,this.settings.first,this.settings.last,this.settings.values,this.settings.items,this.settings.color),this.setUpCounter()},this.unselectAllElements=function(){this.unselectAll(this.selector,this.settings.first,this.settings.last,this.settings.values,this.settings.color),this.setUpCounter()},this.showJSONOutputFormat=function(){this.showSelectedJSON(this.settings.values,this.settings.items,this.settings.output)},this.showSerializedOutputFormat=function(){this.showSelectedSerialize(this.selector,this.settings.values,this.settings.items,this.settings.output)},this.getSelectedJSON=function(){return this.getSelectedJSONOutput(this.settings.values,this.settings.items,this.settings.output)},this.getSelectedSerialize=function(){return this.getSelectedSerializeOutput(this.selector,this.settings.values,this.settings.items,this.settings.output)},this.getSelected=function(){return this.numberSelected(this.settings.values)},this.setUpStatsButtons=function(){null!==document.getElementById(this.settings.togg)&&document.getElementById(this.settings.togg).addEventListener("click",this.toggleElements.bind(this)),null!==document.getElementById(this.settings.all)&&document.getElementById(this.settings.all).addEventListener("click",this.selectAllElements.bind(this)),null!==document.getElementById(this.settings.none)&&document.getElementById(this.settings.none).addEventListener("click",this.unselectAllElements.bind(this)),null!==document.getElementById(this.settings.json)&&document.getElementById(this.settings.json).addEventListener("click",this.showJSONOutputFormat.bind(this)),null!==document.getElementById(this.settings.serial)&&document.getElementById(this.settings.serial).addEventListener("click",this.showSerializedOutputFormat.bind(this)),null!==document.getElementById(this.settings.elems)&&(document.getElementById(this.settings.elems).innerHTML=document.getElementsByClassName(this.selector).length)},this.checkHiddenInputs=function(){try{null===document.getElementById(this.settings.first)?this.setUpHiddenInput(this.settings.first):this.sv(this.settings.first,""),null===document.getElementById(this.settings.last)?this.setUpHiddenInput(this.settings.last):this.sv(this.settings.last,""),null===document.getElementById(this.settings.values)?this.setUpHiddenInput(this.settings.values):this.sv(this.settings.values,""),null===document.getElementById(this.settings.items)&&this.setUpHiddenInput(this.settings.items)}catch(t){this.cl(t)}},this.setUpHiddenInput=function(t){try{var s=document.createElement("input");s.id=t,s.type="hidden",s.value="",s.autocomplete="off",document.body.appendChild(s)}catch(t){this.cl(t)}},this.cl=function(t){this.settings.debug&&console.error("Error:",t)},this.initialize=function(){return this.checkHiddenInputs(),this.itemsDOM=document.querySelectorAll("."+this.selector),this.setUpItemsAndTheirInput(),this.defineClick(),this.setUpStatsButtons(),this},this.initialize()}