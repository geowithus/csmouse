/**
 *
 * @Class           CSMOUSE / csmouse-class.js, jQuery Plugin
 * @Idea            Darko B.
 * @Authors         Darko B. && Kresimir K.
 * @Copyright       Copyright (c) GEO With Us Corp. USA, New York, NY
 * @Version         1.2 Apr-2014
 * @License         Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)
 * @ComercialUse    Feel free to study and addapt for personal use, but for commercial or any enterprise use, please contact us @ copyright@geowith.us
 * @URL             https://geowith.us/csmouse/
 *
 */
!function(S){S.fn.CSMouse=function(t,e){function i(t,e){return Math.min(t,e)}function o(t,e){return Math.max(t,e)}function n(t){u=t,0==S("#"+c.first).length&&a.parent().append('<input id="'+c.first+'" type="hidden" value="" autocomplete="off" />'),S("#"+c.first).val(t)}function l(t){0==S("#"+c.last).length&&a.parent().append('<input id="'+c.last+'" type="hidden" value="" autocomplete="off" />'),S("#"+c.last).val(t)}function r(){a.removeClass(c.color),function(){l(f);for(var t=i(u,f),e=o(u,f),n=t;n<=e;n++)S(a[n]).addClass(c.color)}(),j()}var s={first:"first_"+t,last:"last_"+t,values:"values_"+t,items:"items_"+t,color:"csmouse_color",all:"sel_all_"+t,none:"unsel_all_"+t,togg:"toggle_"+t,cnt:"csmouse_cnt_elem_"+t,elems:"csmouse_elems_elem_"+t,json:"csmouse_json_elem_"+t,serial:"csmouse_serial_elem_"+t,output:"id",debug:!1},c=S.extend({},s,e),a=S(this),u=S(this).first().index(),f=(S(this).first().index(),null),d=!1,h=[],p=[],g=[],m=[],v=function(){a.addClass(c.color),j()},_=function(){a.removeClass(c.color),j()},y=function(){a.addClass(c.color);for(var t=0;t<h.length;t++)S(h[t]).removeClass(c.color);j()},b=this.getSelectedJSON=function(){return"id"===c.output?JSON.stringify(g):JSON.stringify(m)},C=function(){return 0<g.length?alert(b()):alert("Nothing is selected from the list"),!1},k=this.getSelectedSerialize=function(){return"id"===c.output?t+"=on&"+g.join("=on&")+"=on":t+"=on&"+m.join("=on&")+"=on"},x=function(){return 0<g.length?alert(k()):alert("Nothing is selected from the list"),!1},j=(this.getSelected=function(){return h.length},function(){h=[],p=[],g=[],m=[];for(var t,e=0;e<a.length;e++){var n,i,o,l=S(a[e]);l.hasClass(c.color)&&(h.push(l),n=l.index(),p.push(n),i=l.attr("id"),g.push(i),o=void 0!==l.attr(c.output)?l.attr(c.output):i,m.push(o))}t=p,0==S("#"+c.values).length&&a.parent().append('<input id="'+c.values+'" type="hidden" value="" autocomplete="off" />'),S("#"+c.values).val(t.join()),0<S("#"+c.cnt).length&&S("#"+c.cnt).text(p.length)});return this.initialize=function(){try{return 0<S("#"+c.cnt).length&&S("#"+c.cnt).text(0),0<S("#"+c.elems).length&&S("#"+c.elems).text(a.length),function(){try{S("#"+c.all).unbind("click").bind("click",function(t){v()}),S("#"+c.none).unbind("click").bind("click",function(t){_()}),S("#"+c.togg).unbind("click").bind("click",function(t){y()}),S("#"+c.json).unbind("click").bind("click",function(t){C(),t.preventDefault()}),S("#"+c.serial).unbind("click").bind("click",function(t){x(),t.preventDefault()})}catch(t){c.debug&&console.error("Error:",t)}}(),function(){0==S("#"+c.items).length&&a.parent().append('<input id="'+c.items+'" type="hidden" value="" autocomplete="off" />');var e=[];a.each(function(t){e.push(a[t].id)}),S("#"+c.items).val(e.join())}(),j(),this.unbind("click").bind("click",function(t){if(f=Array.from(a).indexOf(t.target),t.ctrlKey&&t.shiftKey||t.metaKey&&t.shiftKey?function(){for(var t=i(u,f),e=o(u,f),n=t;n<=e;n++)d?S(a[n]).removeClass(c.color):S(a[n]).addClass(c.color);l(f),j()}():t.ctrlKey||t.metaKey?(n(f),l(f),d=!!S(a[f]).hasClass(c.color),S(a[f]).toggleClass(c.color),j()):t.shiftKey?r():(n(f),l(f),a.removeClass(c.color),a.eq(f).addClass(c.color),j()),"INPUT"!==S(this).prop("tagName"))return t.preventDefault(),t.stopPropagation(),!1}),this}catch(t){c.debug&&console.error("Error:",t)}},this.initialize()}}(jQuery);